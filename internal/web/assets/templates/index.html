{{define "content"}}
<div class="space-y-8">
    <!-- Hero Section -->
    <div class="text-center py-12 bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-lg">
        <h1 class="text-4xl font-bold mb-4">Guild Wars 2 API Explorer</h1>
        <p class="text-xl text-blue-100 mb-6">Discover items, skills, achievements, and more from Tyria</p>
        <div class="flex items-center justify-center space-x-4 text-sm">
            {{if .BuildInfo}}
            <span class="bg-blue-500 px-3 py-1 rounded-full">Current Build: {{.BuildInfo.ID}}</span>
            {{end}}
            <span class="bg-blue-500 px-3 py-1 rounded-full">API v2</span>
            <span class="bg-green-500 px-3 py-1 rounded-full">Live Data</span>
        </div>
    </div>

    <!-- Quick Stats -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div class="gw2-card p-6 text-center">
            <div class="text-3xl mb-2">üì¶</div>
            <div class="text-2xl font-bold text-blue-600">{{.Data.Items}}</div>
            <div class="text-gray-600 dark:text-gray-400">Items</div>
        </div>
        <div class="gw2-card p-6 text-center">
            <div class="text-3xl mb-2">‚ú®</div>
            <div class="text-2xl font-bold text-green-600">{{.Data.Skills}}</div>
            <div class="text-gray-600 dark:text-gray-400">Skills</div>
        </div>
        <div class="gw2-card p-6 text-center">
            <div class="text-3xl mb-2">üèÜ</div>
            <div class="text-2xl font-bold text-yellow-600">{{.Data.Achievements}}</div>
            <div class="text-gray-600 dark:text-gray-400">Achievements</div>
        </div>
        <div class="gw2-card p-6 text-center">
            <div class="text-3xl mb-2">üåç</div>
            <div class="text-2xl font-bold text-purple-600">{{.Data.Worlds}}</div>
            <div class="text-gray-600 dark:text-gray-400">Worlds</div>
        </div>
    </div>

    <!-- Main Navigation Tabs -->
    <div class="tab-container">
        <nav class="tab-list" role="tablist">
            <button class="tab-button active" data-tab="items" role="tab" aria-selected="true">
                üì¶ Items
            </button>
            <button class="tab-button" data-tab="skills" role="tab" aria-selected="false">
                ‚ú® Skills
            </button>
            <button class="tab-button" data-tab="achievements" role="tab" aria-selected="false">
                üèÜ Achievements
            </button>
            <button class="tab-button" data-tab="worlds" role="tab" aria-selected="false">
                üåç Worlds
            </button>
            <button class="tab-button" data-tab="currencies" role="tab" aria-selected="false">
                üí∞ Currencies
            </button>
            <button class="tab-button" data-tab="trading" role="tab" aria-selected="false">
                üìà Trading Post
            </button>
        </nav>
    </div>

    <!-- Tab Content -->
    <div class="tab-content-container">
        <!-- Items Tab -->
        <div id="items-tab" class="tab-content active" role="tabpanel">
            <div class="gw2-card p-6">
                <h2 class="text-2xl font-bold mb-6 flex items-center">
                    <span class="mr-2">üì¶</span>
                    Item Search
                </h2>
                
                <form hx-get="/search/items" hx-target="#items-results" hx-trigger="submit, keyup delay:500ms from:input[name='query']" hx-indicator="#items-loading">
                    <div class="search-form">
                        <div>
                            <label for="item-query" class="block text-sm font-medium mb-2">Search Items</label>
                            <input type="text" id="item-query" name="query" placeholder="Search for items..." 
                                   class="gw2-input search-input w-full" autocomplete="off">
                        </div>
                        
                        <div>
                            <label for="item-rarity" class="block text-sm font-medium mb-2">Rarity</label>
                            <select id="item-rarity" name="rarity" class="gw2-input w-full">
                                <option value="">All Rarities</option>
                                <option value="Basic">Basic</option>
                                <option value="Fine">Fine</option>
                                <option value="Masterwork">Masterwork</option>
                                <option value="Rare">Rare</option>
                                <option value="Exotic">Exotic</option>
                                <option value="Ascended">Ascended</option>
                                <option value="Legendary">Legendary</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="item-type" class="block text-sm font-medium mb-2">Type</label>
                            <select id="item-type" name="type" class="gw2-input w-full">
                                <option value="">All Types</option>
                                <option value="Armor">Armor</option>
                                <option value="Weapon">Weapon</option>
                                <option value="Trinket">Trinket</option>
                                <option value="Consumable">Consumable</option>
                                <option value="Tool">Tool</option>
                                <option value="Trophy">Trophy</option>
                                <option value="UpgradeComponent">Upgrade Component</option>
                                <option value="Bag">Bag</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="item-level" class="block text-sm font-medium mb-2">Level Range</label>
                            <div class="flex space-x-2">
                                <input type="number" name="min_level" placeholder="Min" class="gw2-input w-full" min="0" max="80">
                                <input type="number" name="max_level" placeholder="Max" class="gw2-input w-full" min="0" max="80">
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <button type="submit" class="gw2-button gw2-button-primary">
                            Search Items
                        </button>
                        <button type="button" onclick="clearForm(this.form)" class="gw2-button gw2-button-secondary ml-2">
                            Clear
                        </button>
                    </div>
                </form>
                
                <div id="items-loading" class="htmx-indicator mt-4">
                    <div class="flex items-center justify-center py-8">
                        <div class="loading-spinner"></div>
                        <span class="ml-2">Searching items...</span>
                    </div>
                </div>
                
                <div id="items-results" class="mt-8">
                    <!-- Results will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Skills Tab -->
        <div id="skills-tab" class="tab-content" role="tabpanel">
            <div class="gw2-card p-6">
                <h2 class="text-2xl font-bold mb-6 flex items-center">
                    <span class="mr-2">‚ú®</span>
                    Skill Search
                </h2>
                
                <form hx-get="/search/skills" hx-target="#skills-results" hx-trigger="submit, keyup delay:500ms from:input[name='query']" hx-indicator="#skills-loading">
                    <div class="search-form">
                        <div class="col-span-2">
                            <label for="skill-query" class="block text-sm font-medium mb-2">Search Skills</label>
                            <input type="text" id="skill-query" name="query" placeholder="Search for skills..." 
                                   class="gw2-input search-input w-full">
                        </div>
                        
                        <div>
                            <label for="skill-profession" class="block text-sm font-medium mb-2">Profession</label>
                            <select id="skill-profession" name="profession" class="gw2-input w-full">
                                <option value="">All Professions</option>
                                <option value="Guardian">Guardian</option>
                                <option value="Revenant">Revenant</option>
                                <option value="Warrior">Warrior</option>
                                <option value="Engineer">Engineer</option>
                                <option value="Ranger">Ranger</option>
                                <option value="Thief">Thief</option>
                                <option value="Elementalist">Elementalist</option>
                                <option value="Mesmer">Mesmer</option>
                                <option value="Necromancer">Necromancer</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="skill-type" class="block text-sm font-medium mb-2">Type</label>
                            <select id="skill-type" name="type" class="gw2-input w-full">
                                <option value="">All Types</option>
                                <option value="Weapon">Weapon</option>
                                <option value="Heal">Heal</option>
                                <option value="Utility">Utility</option>
                                <option value="Elite">Elite</option>
                                <option value="Profession">Profession</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mt-4">
                        <button type="submit" class="gw2-button gw2-button-primary">
                            Search Skills
                        </button>
                        <button type="button" onclick="clearForm(this.form)" class="gw2-button gw2-button-secondary ml-2">
                            Clear
                        </button>
                    </div>
                </form>
                
                <div id="skills-loading" class="htmx-indicator mt-4">
                    <div class="flex items-center justify-center py-8">
                        <div class="loading-spinner"></div>
                        <span class="ml-2">Searching skills...</span>
                    </div>
                </div>
                
                <div id="skills-results" class="mt-8">
                    <!-- Results will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Other tabs placeholder content -->
        <div id="achievements-tab" class="tab-content" role="tabpanel">
            <div class="gw2-card p-6">
                <h2 class="text-2xl font-bold mb-4">üèÜ Achievements</h2>
                <p class="text-gray-600 dark:text-gray-400">Achievement search coming soon...</p>
            </div>
        </div>

        <div id="worlds-tab" class="tab-content" role="tabpanel">
            <div class="gw2-card p-6">
                <h2 class="text-2xl font-bold mb-4">üåç Worlds</h2>
                <div hx-get="/search/worlds" hx-trigger="load" hx-target="#worlds-list">
                    <div id="worlds-list">Loading worlds...</div>
                </div>
            </div>
        </div>

        <div id="currencies-tab" class="tab-content" role="tabpanel">
            <div class="gw2-card p-6">
                <h2 class="text-2xl font-bold mb-4">üí∞ Currencies</h2>
                <div hx-get="/search/currencies" hx-trigger="load" hx-target="#currencies-list">
                    <div id="currencies-list">Loading currencies...</div>
                </div>
            </div>
        </div>

        <div id="trading-tab" class="tab-content" role="tabpanel">
            <div class="gw2-card p-6">
                <h2 class="text-2xl font-bold mb-4">üìà Trading Post</h2>
                <p class="text-gray-600 dark:text-gray-400">Trading post features coming soon...</p>
            </div>
        </div>
    </div>
</div>

<script>
// Tab functionality
function initTabs() {
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    
    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            const tabName = button.dataset.tab;
            
            // Remove active class from all tabs and contents
            tabButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-selected', 'false');
            });
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Add active class to clicked tab and corresponding content
            button.classList.add('active');
            button.setAttribute('aria-selected', 'true');
            document.getElementById(tabName + '-tab').classList.add('active');
        });
    });
}

// Form utilities
function clearForm(form) {
    form.reset();
    // Trigger search with empty values to show all results
    htmx.trigger(form, 'submit');
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', initTabs);
</script>
{{end}}

{{define "head"}}
<style>
/* Additional tab-specific styles */
.tab-content-container {
    min-height: 500px;
}

.search-form {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
}

@media (min-width: 768px) {
    .search-form {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 1024px) {
    .search-form {
        grid-template-columns: repeat(4, 1fr);
    }
}
</style>
{{end}}